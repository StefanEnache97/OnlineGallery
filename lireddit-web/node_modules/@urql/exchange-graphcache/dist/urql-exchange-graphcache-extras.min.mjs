import{stringifyVariables as e}from"@urql/core";import{_ as r}from"./08e6d3e1.min.mjs";var n={__typename:"PageInfo",endCursor:null,startCursor:null,hasNextPage:!1,hasPreviousPage:!1};function t(e){return"string"==typeof e?e:null}function s(e,r,n){for(var t=new Set,s=0,o=r.length;s<o;s++){var a=e.resolve(r[s],"node");"string"==typeof a&&t.add(a)}for(r=r.slice(),s=0,o=n.length;s<o;s++){var f=e.resolve(a=n[s],"node");"string"!=typeof f||t.has(f)||(t.add(f),r.push(a))}return r}function o(e,r){for(var n=new Set,t=0,s=e.length;t<s;t++){var o=e[t];"string"==typeof o&&n.add(o)}for(e=e.slice(),t=0,s=r.length;t<s;t++)"string"!=typeof(o=r[t])||n.has(o)||(n.add(o),e.push(o));return e}function a(r,n){for(var t in n)if("first"!==t&&"last"!==t&&"after"!==t&&"before"!==t){if(!(t in r))return!1;var s=r[t],o=n[t];if(typeof s!=typeof o||"object"!=typeof s?s!==o:e(s)!==e(o))return!1}for(var a in r)if("first"!==a&&"last"!==a&&"after"!==a&&"before"!==a&&!(a in n))return!1;return!0}function f(e,r,s){var o=t(e.resolveFieldByKey(r,s));if(!o)return null;s=e.resolve(o,"__typename"),r=e.resolve(o,"edges")||[];var a=e.resolve(o,"nodes")||[];if("string"!=typeof s)return null;s={__typename:s,edges:r,nodes:a,pageInfo:n};var f=e.resolve(o,"pageInfo");if("string"==typeof f){o=t(e.resolve(f,"__typename")),a=t(e.resolve(f,"endCursor"));var i=t(e.resolve(f,"startCursor")),u=e.resolve(f,"hasNextPage");f=e.resolve(f,"hasPreviousPage"),null===(o=s.pageInfo={__typename:"string"==typeof o?o:"PageInfo",hasNextPage:"boolean"==typeof u?u:!!a,hasPreviousPage:"boolean"==typeof f?f:!!i,endCursor:a,startCursor:i}).endCursor&&(a=r[r.length-1])&&(a=e.resolve(a,"cursor"),o.endCursor=t(a)),null===o.startCursor&&(r=r[0])&&(e=e.resolve(r,"cursor"),o.startCursor=t(e))}return s}function i(e){void 0===e&&(e={});var i=e.mergeMode||"inwards";return function(e,u,l,d){var g=d.fieldName,p=l.inspectFields(e=d.parentKey).filter((function(e){return e.fieldName===g})),v=p.length;if(0!==v){for(var y=null,m=[],h=[],c=[],_=[],P=r({},n),C=0;C<v;C++){var I=p[C],b=I.fieldKey;if(null!==(I=I.arguments)&&a(u,I)&&null!==(b=f(l,e,b))){if("inwards"===i&&"number"==typeof I.last&&"number"==typeof I.first){P=b.edges.slice(0,I.first+1);var N=b.edges.slice(-I.last),x=b.nodes.slice(0,I.first+1);I=b.nodes.slice(-I.last),m=s(l,m,P),h=s(l,N,h),c=o(c,x),_=o(I,_),P=b.pageInfo}else I.after?(m=s(l,m,b.edges),c=o(c,b.nodes),P.endCursor=b.pageInfo.endCursor,P.hasNextPage=b.pageInfo.hasNextPage):I.before?(h=s(l,b.edges,h),_=o(b.nodes,_),P.startCursor=b.pageInfo.startCursor,P.hasPreviousPage=b.pageInfo.hasPreviousPage):("number"==typeof I.last?(h=s(l,h,b.edges),_=o(_,b.nodes)):(m=s(l,m,b.edges),c=o(c,b.nodes)),P=b.pageInfo);b.pageInfo.__typename!==P.__typename&&(P.__typename=b.pageInfo.__typename),y!==b.__typename&&(y=b.__typename)}}if("string"==typeof y){if(!t(l.resolve(e,g,u))){if(!d.store.schema)return;d.partial=!0}return{__typename:y,edges:"inwards"===i?s(l,m,h):s(l,h,m),nodes:"inwards"===i?o(c,_):o(_,c),pageInfo:{__typename:P.__typename,endCursor:P.endCursor,startCursor:P.startCursor,hasNextPage:P.hasNextPage,hasPreviousPage:P.hasPreviousPage}}}}}}function u(r){function n(r,n){for(var o in n)if(o!==t&&o!==s){if(!(o in r))return!1;var a=r[o],f=n[o];if(typeof a!=typeof f||"object"!=typeof a?a!==f:e(a)!==e(f))return!1}for(var i in r)if(i!==t&&i!==s&&!(i in n))return!1;return!0}void 0===r&&(r={});var t=r.offsetArgument;void 0===t&&(t="skip");var s=r.limitArgument;return void 0===s&&(s="limit"),function(e,r,s,o){var a=o.fieldName,f=s.inspectFields(e=o.parentKey).filter((function(e){return e.fieldName===a})),i=f.length;if(0!==i){for(var u=new Set,l=[],d=null,g=0;g<i;g++){var p=f[g],v=p.fieldKey;if(null!==(p=p.arguments)&&n(r,p)&&(v=s.resolveFieldByKey(e,v),p=p[t],null!==v&&0!==v.length&&"number"==typeof p)){if(!d||p>d)for(d=0;d<v.length;d++){var y=v[d];u.has(y)||(l.push(y),u.add(y))}else{for(d=[],y=0;y<v.length;y++){var m=v[y];u.has(m)||(d.push(m),u.add(m))}l=d.concat(l)}d=p}}if(s.resolve(e,a,r))return l;if(o.store.schema)return o.partial=!0,l}}}export{i as relayPagination,u as simplePagination};
//# sourceMappingURL=urql-exchange-graphcache-extras.min.mjs.map

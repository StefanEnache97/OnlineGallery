import e,{useState as t}from"react";import n from"react-ssr-prepass";import{createClient as r,ssrExchange as i,dedupExchange as o,cacheExchange as a,fetchExchange as u,Provider as l}from"urql";function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c,f=null;function p(){f=null}function v(){return null}function m(e,t){var n="undefined"==typeof window;return!n&&f||((f=r(s({},e,{suspense:t&&(n||e.suspense)}))).toJSON=v),f}function d(r,f){return f||(f={}),function(v){var d,h=Boolean(v.getInitialProps||f.ssr),q=function(n){var f=n.urqlClient,d=n.urqlState,q=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(n,["urqlClient","urqlState"]),g=t(0),y=e.useMemo((function(){if(f)return f;c&&"undefined"!=typeof window||(c=i({initialState:d}));var e=r(c);return e.exchanges||(e.exchanges=[o,a,c,u]),m(e,h)}),[f,d,g[0]]);return e.createElement(l,{value:y},e.createElement(v,s({urqlClient:y,resetUrqlClient:function(){p(),c=i({initialState:void 0}),g[1](g[0]+1)}},q)))};return q.displayName="withUrqlClient("+((d=v).displayName||d.name||"Component")+")",h&&(q.getInitialProps=function(t){function l(){return s({},C,{urqlState:q?q.extractData():void 0,urqlClient:y})}function c(){if("undefined"!=typeof window)return s({},C,{urqlClient:y});var t=s({},C,{urqlClient:y});return Promise.resolve(n(e.createElement(p,s({},d?t:{pageProps:t})))).then(l)}function f(e){C=e}try{var p=t.AppTree,d=!!t.Component,h=d?t.ctx:t,q=i({initialState:void 0}),g=r(q,h);g.exchanges||(g.exchanges=[o,a,q,u]);var y=m(g,!0);y&&(h.urqlClient=y);var C={};const e=function(){if(v.getInitialProps)return Promise.resolve(v.getInitialProps(t)).then(f)}();return Promise.resolve(e&&e.then?e.then(c):c())}catch(e){return Promise.reject(e)}}),q}}export{d as withUrqlClient};
//# sourceMappingURL=next-urql.min.es.js.map
